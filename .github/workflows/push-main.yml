name: push-main

on:
  push:
    branches:
      - main

jobs:
  preview:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: app
    steps:
      - name: Setup repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20.x

      # - name: Install npm dependencies
      #   run: npm install

      # - name: Run lint
      #   run: npm run format

      # - name: Setup EAS
      #   uses: expo/expo-github-action@v8
      #   with:
      #     eas-version: latest
      #     token: ${{ secrets.EXPO_TOKEN }}

      # - name: Run tests
      #   run: npm test

      # - name: Create preview
      #   run: eas update --auto

      - name: Check commit patterns
        uses: wagoid/commitlint-github-action@v6

      # - name: Generate QR Code
      #   uses: slackapi/slack-github-action@v1.17.0
      #   env:
      #     SLACK_BOT_TOKEN: ${{ secrets.SLACK_TOKEN }}
      #   with:
      #     channel-id: deployments
      #     slack-message: "Novas funcionalidades dispon√≠veis!/n- Preview: ${{ steps.preview.outputs.qr }}"

      # jWVQVl-xK9Y6WXiiFmnSoG7FV9oGYWgvC6IRrqK9
      # <YOUR_GithubPersonalAccessToken_HERE>
